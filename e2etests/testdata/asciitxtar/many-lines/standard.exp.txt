+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                                                                                             cook                                                                                                                                                              |
|      +----------+                                                                                                                                                                                                                                                                                                             |
|      |Heartbeat |                                                                                                                                                                                                                                                                                                             |
|      |          |                                                                                                                                                                                                                                                                                                             |
|      +----------+                                                                                                                                                                                                                                                                                                             |
|                                                                                                                                                                                                                                                                                                                               |
|              +------+                                                                                                                                                                                                                                                                                                         |
|              |ErrUI |                                                                                                                                                                                                                                                                                                         |
|              |      |-------------------------------------+                                                                                                                                                                                                                                                                   |
|              +------+                                     |                                                                                                                                                                                                                                                                   |
|                                                           |                                                                                                                                                                                                                                                                   |
|                       +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------                                          +                                                      |
|                       |                                   |                                                                                                                                                                                                            |                                                      |
|    +-------------+    |                                   |                                                                                                                                                                                                            |                                                      |
|    |StoryChanged |    |+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+                                        |                                                      |
|    |             |    ||                                  |                                                                                                                                                                   |                                        |                                                      |
|    +-------------+    ||                                  |                                                                                                                                                                   |                                        |                                                      |
|                       ||                                  |                                                                                                                                                                   |                                        |                                                      |
|                       ||+--------------------------------+|                                                                                                                                                                   |                                        |                                                      |
|                       |||                                ||                                                                                                                                                                   |                                        |                                                      |
|                       |||+-----------------------------+ ||                                                                                                                                                                   |                                        |                                                      |
|                       ||||                               ||                                                                                                                                                                   |                                        |                                                      |
|                       ||||                             | ||                                                                                                                                                                   |                                        |                                                      |
|                       ||||                             require                                                                                                                                                                |                                        |                                                      |
|              +------+ ||||                             | ||                                                                                                                                                                   |                                        |                                                      |
|              |      |-+|||                             | ||                                                                                                                                                                   |                                        |                                                      |
|              |      |  |||                             | ||                                                                                                                                                                   |                                        |                                                      |
|              |      |--+||                             | ||                                                                                                                                                                   |                                        |                                                      |
|              |      |   ||                             | ||                                                                                                                                                                   |                                        |                                                      |
|              |Ready |---+|                             | ||                                                                                                                                                                   |                                        |                                                      |
|              |      |    |                             | ||                                                                                                                                                                   |                                        |                                                      |
|              |      |<---+                             | ||                                                                                                                                                                   |                                        |                                                      |
|              |      |                                  | ||                                                                                                                                                                   |                                        |                                                      |
|              |      |-+                                | ||                                                                                                                                                                   |                                        |                                                      |
|              |      | |                                | ||                                                                                                                                                                   |                                        |                                                      |
|              +------+ |                                | ||                                                                                                                                                                   |                                        |                                                      |
|                       |                                | ||                                                                                                                                                                   |                                        |                                                      |
|                       |                                | ||                                                                                                                                                                   |                                     require                                                   |
|                       |                                | ||                                                                                                                                                                   |                                        |                                                      |
|                       |                                |add                                                                                                                                                                   |                                        |                                                      |
|                       |                                | ||                                                                                                                                                                   |                                        |                                                      |
|                       |                                | |                                                                                                                                                                    |                                        |                                                      |
|                       |                             require                                                                                                                                                                   |                                        |                                                      |
|                       |                                | |                                                                                                                                                                    |                                        |                                                      |
|                       |                                | |                                                                                                                                                                    |                                                                                               |
|                       |                                | |                                                                                                                                                                                                                                                                    |
|                       |                                |                                                                                                                                                                                                                                                                      |
|                       |                                |     +-------+                                                                                                                                                                                                                                                        |
|                       |                                |     |       |                                                                                                                                                                                                                                                        |
|                       |                                |  +->|       |                                                                                                                                                                                                                                                        |
|                       |                                |     |       |                                                                                                                                                                                                                                                        |
|                       |                     +--------------->|       |                                                                                                                                                                                                                                                        |
|                       |                     |          |     |       |                                                                                                                                                                                                                                                        |
|                       |                     |+-------------->|       |                                                                                                                                                                                                                                                        |
|                       |                     |          |     |       |                                                                                                                                              +-------------------------------------------------+                                                       |
|                       |                     | +------------->|       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |          |     |       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |          |     |UIMode |                                                                                                                                              |                                                 |                                                       |
|                       |                     |   +----------->|       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |          |     |       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |      +-------->|       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |          |     |       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |         +----->|       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |          |     |       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |          |+--->|       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |          |     |       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |          |  +->|       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |          |     |       |                                                                                                                                              |                                                 |                                                       |
|                       |                     |          |     +-------+                                                                                                                                              |                                                 |                                                       |
|                       |                     |          |                                                                                                                                                            |                                                 |                                                       |
|                       +------------------------------+ |                                                                                                                                                            |                                                 |                                                       |
|                                             |        | |                                                                                                                                                            |                                                 |                                                       |
|             +-------+                       |        | |                                                                                                                                                            |                                                 |                                                       |
|             |ErrMem |                       |        | |                                                                                                                                                            |                                                 |                                                       |
|             |       |-------------require---|-------+| |     +-----+                                                                                                                                                |                                                 |                                                       |
|             +-------+                       |       || |     |Loop |                                                                                                                                                |                                                 |                                                       |
|                                             |       || | +-->|     |                                                                                                                                                |                                                 |                                                       |
|                                             |       || +-----+-----+                                                                                                                                                |                                                 |                                                       |
|                                             |       ||                                                                                                                                                              |                                                 |                                                       |
|                                             |       ||                                                                                                                                                           require                                              |                                                       |
|                                             |       ||                                                                                                                                                              |                                                 |                                                       |
|                                             |       ||                                                                                                                                                              |+-----------------------------------------------+|                                                       |
|                                             |       ||                                                                                                                                                              ||                                               ||                                                       |
|                                             ||      ||                                                                                                                                                              ||                                               ||                 +-----------+                         |
|                                             ||      ||                                                                                                                                                              ||                                               ||                 |           |                         |
|  +------------------+                       ||      ||                                                                                                                                                              ||                                               ||                 |           |                         |
|  |StepCommentsReady |                       ||      ||                                                                                                                                                              ||                                               ||                 |           |    +-------------+      |
|  |                  |<--------------------+ ||      ||       +----------+                                                                                                                                           ||                                               ||                 |           +--->|CheckStories |      |
|  +------------------+                     | ||      ||       |          |                                                                                                                                           ||                                               ||                 |           +----|             |      |
|                                           | ||      ||       |          |                                                                                                                                           ||+---------------------------------------------+||                 |           |    +-------------+      |
|                                           | ||      +|------>|          |                                                                                                                                           |||                                             |||                 |           |                         |
|                                           | ||       |       |          |                                                                                                                                           |||                                             |||                 |           |                         |
|                                           | ||       |       |          |                                                                                                                                           |||                                             |||                add          |                         |
|                                           |+||-------|------>|          |                                                                                                                                           |||                                             |||                 |           |                         |
|                                           ||||       |       |          |                                                                                                                                           |||                                             |||                 |           |                         |
|                                           ||||   +---|------>|          |                                                                                                                                           |||                                             |||                 |           |                         |
|                                           ||||   |   |       |Exception |                                                                                                                                           |||                                             |||                 |           |                         |
|                                           ||||   |  +|------>|          |                                                                                                                                           |||                                             |||   +------+      |           |                         |
|                                           ||||   |  ||       |          |                                                                                                                                           |||                                             |||   |      |      |        require                      |
|                                           ||||   |  ||       |          |                                                                                                                                           |||                                             |||   |      |      |           |                         |
|                                           ||||   |  || +---->|          |                                                                                                                                           |||                                             |||+->|      |      |           |                         |
|                                           ||||   |  ||       |          |                                                                                                                                           |||                                             |||   |      |      |           |                         |
|                                           ||||   |  ||   +-->|          |                                                                                                                                           |||                                             |||   |      |      |           |                         |
|                                           ||||   |  ||       |          |                                                                                                                                           |||                                             ||+-->|      |------+           |                         |
|                                          require |  ||       |          |                                                                                                                                           |||                                             ||    |      |                  |                         |
|                                           ||||   |  ||     +>|          |                                                                                                                                           |||                                             ||    |      |                  |                         |
|                                           ||||   |  ||       |          |                                                                                                                                           |||                                             |+--->|      |                  |                         |
|    +-------------+                        ||||   |  ||       +----------+                              +-------------------------------------------------------------------+                                        |||                                             |     |      |                  |                         |
|    |BaseDBSaving |                  double remove|  ||                                                 |                                                                   |                                      require                                           |     |      |                  |                         |
|    |             |                        ||||   |  ||                                                 |                                                                   |                                        |||                                             +-----|      |<-----------------+                         |
|    +-------------+                        ||||   |  ||                                                 |                                                                   |                                        |||          +------------+                           |      |                                            |
|                                           ||||   |  ||                                                 |                                                                   |                                        |||          |BaseDBReady |                           |Start |                                            |
|                                         require  |  ||                                                 |                                                                   |                                        |||+-------->|            |----------require--------->|      |                                            |
|                                           ||||   |  ||                                                 |                                                                   |                                        ||||         +------------+                           |      |                                            |
|                                           ||||   |  ||                                                 |                                                                   |                                        ||||                                                  |      |                                            |
|                                           ||||   |  ||                                                 |                                                                   |                                        ||||                                            +---->|      |---------------------+                      |
|                                           ||||   |  ||                                                 |                                                                   |                                        ||||                                            |     |      |                     |                      |
|                                           ||||   |  ||                                                 |                                             +------------------+  |                                        ||||                                            |     |      |                     |                      |
|                                           ||||   |  ||                                                 |                                             |CheckingOfferRefs |  |                                        ||||                                            |+--->|      |                     |                      |
|                                           ||||   |  ||                                                 |            +------------------------------->|                  |-------------------------------------------+|||                                            |     |      |                     |                      |
|                                           ||||   |  ||                                                 |            |                                +------------------+  |                                         |||                                            |     |      |                     |                      |
|                                           ||||   |  ||                                                 |            |                                                      |                                         add                                            | +-->|      |<-----+              |                      |
|                                           ||||   |  ||                                                 |            |                                                      |                                         |||                                            |     |      |                     |                      |
|                                           ||||   |  ||                                                 |            |                                                      |                                         |||                                            |  +->|      |                     |                      |
|                                           ||||   |  ||                                                 |            |                                                      |                                         |||                                         require  |      |                     |                      |
|                                           ||||   |  ||                                                 |            |                                                      |                                         |||                                            |     +------+                     |                      |
|                                           ||||   |  ||        +----------------+                       |            |                                                      |                                         |||                                            |                                  |                      |
|                                           ||||   |  ||        |GenStepComments |                       |            |                                                      |                                         |||                                            |                                  |                      |
|                                           +|||---|--||------->|                |-------------------------------------+                                                     |                                         |||                                            |                                  |                      |
|              +------+                      |||   |  ||        +----------------+                       |            ||                                                     |                                         |||                                            |                                  |                      |
|              |ErrDB |                      |||   |  ||                                                 |            ||                                                     |                                         |||                                            |                                  |                      |
|              |      |----------------------+||   |  ||                                                 |            ||                                                     |                                         |||                                            |                                  |                      |
|              +------+                       ||   |  ||                                                 |            ||                                                     |                                         |||                   +----+                   |                                  |                      |
|                                             ||   |  ||                                                 |            ||                                                     |                                         |||                   |Msg |                   |                                  |                      |
|                                             ||   |  ||                                                 |            ||                                                     |                                         |||                   |    |-------------------+                   |              |                      |
|                                             ||   |  ||                                                 |            ||                                                     |                                         |||                   +----+                                       |              |                      |
|                                             ||   |  ||                                                 |            ||                                                     |                                         |||                                                                |              |                      |
|                                             ||   |  ||                                                 |            ||                                                     |                                     double remove                                                          |              |                      |
|                                             ||   |  ||                                                 |            ||                                                     |                                         |||                                                                |              |                      |
|                                             ||   |  ||                                                 |            ||                                                     |                      +------------------+||                                                                |              |                      |
|                                             ||   |  ||                                                 |            ||                                                     |                      |                   ||                                                                |              |                      |
|                                             ||   |  ||                                                 |            ||                                               double remove--------------+ |                   ||                                                                |              |                      |
|                                             ||   |  ||                                                 |            ||                                                     |    |               |-+                   ||                                                                |              |                      |
|                                             ||   |  ||                                                 |            ||                                                     |    |BaseDBStarting |<-+                  ||                                                                |              |                      |
|                                             |||  |  ||                                                 |            ||                                                     |    |               |  |                  ||                                                                |              |                      |
|                       +---------------------|||--|+ ||                                                 |            ||                                                     |    |               |<+|                  ||                                                                |              |                      |
|                       |                   require|| ||              +-----------+                      |            ||                                                     |    +---------------+ ||                  ||                                                                |              |                      |
|                       |                     |||  || ||              |           |                      |            ||                                                     |                      ||                  ||                                                                |              |                      |
|                       |                     |||  || ||              |JokesReady |<---------------------+            ||                                                     |                      ||                  ||                                                                |              |                      |
|                       |                     |||  || ||              |           |                                   ||                                                     |                      |+------------------+|                                                                |              |                      |
|                       |                     |||  || ||              |           |<+                                 ||                                                     |                      |                    |                                                                |              |                      |
|                       |                     |||  || ||              +-----------+ |                                 ||                                                     |                      |                    |                                                                |              |                      |
|                       |                     |||  || ||                            |                                 ||                                                     |                      |                    |                                                                |              |                      |
|                       |                     |||  || ||                            +--------------------------------+||                                                     |                      |                    |                                                                |              |                      |
|         +-----------+ |                     |||  || ||                                                             |||                                                     |                      |                    |                                                                |              |                      |
|         |           | |                     |||  || ||                                                             |||                                                     |                      |                    |                                             |                  |              |                      |
|         |StepsReady |-+                     |||  || ||                                                            require                                                  |                      |                    |                                             |                  |              |                      |
|         |           |                       |||  || ||                                                             |||                                                     |                      |                    |                                             |                  |              |                      |
|         |           |<+                     ||require|                                                             |||                                                     |                      |                    |                                             |                  |              |                      |
|         +-----------+ |                     |||  || ||                                                             |||                                                     |                      |                    |                                             |                  |              |                      |
|                       |                     |||  || ||                                                             |||                                                     |                      |                    |                                             |                  |              |                      |
|                       +---------------------|||+ || ||                                                             |||                                                     |                      +--------------------+                                             |                  |              |                      |
|                                             |||| || ||                                                             |||                                                     |                                                                                         |                  |              |                      |
|                                             |||| || ||                            +---------------------------------+|                                                     |                                                                                         |                  |              |                      |
|                                             ||||||| ||                            |                                | |                                                     |                                                                                         |                  |              |                      |
|                                             |||||require                          |                                | |                                                     |                                                                                         |                  |              |                      |
|                                             ||||||| ||                            |                                | |                                                     |                                                                                         |                  |              |                      |
|                                             ||||||| ||                            |                                | |                                                     |      +---------+                                                                        |                  |              |                      |
|      +--------------+                       ||||||| ||                            |+-------------------+           | |                                                     |      |         |                                                                        |                  |              |                      |
|      |UICleanOutput |                       ||||||| ||                            ||                   |           | |                                                     +----->|GenJokes |--------------------------------+                                       |                  |              |                      |
|      |              |-----------------------+|||||| ||                            ||                   |           | |                                                            |         |                                |                                       |                  |              |                      |
|      +--------------+                      require| ||                            ||                   |           | |                            +-----------------------++----->|         |-----+                          |                                       |                  |              |                      |
|                                              |||||| ||                            ||                   |           | |                            |                       ||      +---------+     |                          |                                       |                  |              |                      |
|                                              |||||| ||                            ||                   |           | | +--------------------+     |                       ||                      |                          |                                       |                  |              |                      |
|                                              |||||| ||                            ||                   |           | | |                    |     |                       ||                      |                          |                                       |                  |              |                      |
|                                              |||||| ||                            ||                   |     double remove                  |     |                       ||                      |                          |                                       |                  |              |                      |
|                                              |||||| ||                            ||                   |           | +>|                    |     |                       ||                      |                          |                                       |                  |              |                      |
|                                              |||||| ||                            ||                   |           |   |StoryCookingStarted |     |                       ||                      |                          |                                       |                  |              |                      |
|                                              |||||| ||                            ||                   +-------------->|                    |     |                       ||                      |                          |                                       |                  |              |                      |
|                                              |||||| || |                          ||                               |   |                    |     |                       ||                      |                          |                                       |                  |              |                      |
|                                              |||||| || |                          ||+-----------------------------+|+->|                    |     |                       ||                      |                          |                                       |                  |              |                      |
|                                              |||||| || |                          |||                             ||   +--------------------+     |                       ||                      +-------------------------+|                                       |                  |              |                      |
|                                              |||||| || |                          |||                             ||                              |                       ||                                                ||                                       |                  |              |                      |
|                                              requirequire                         |||                             ||                              |                       ||                                                ||                                       |                  |              |                      |
|                                              |||||| || |                          |||                             ||                              |                       ||                                                ||                                       |                  |              |                      |
|                                              |||||| || |                       remove                             ||                              |                       ||                                                ||                                       |                  |              |                      |
|                                              |||||| || |                          |||                             ||                              |                       ||                                                ||                                       |                  |              |                      |
|     +------------+                           |||||| || |                          |||                             ||                              |                       ||                                                ||                                       |                  |              |                      |
|     |Healthcheck |                           |||||| || |                          |||                             ||                              |                       ||                                                ||                                       |                  |              |                      |
|     |            |                           |||||| || |                        remove                            ||                              |                       ||                                                ||                                       |                  |              |                      |
|     +------------+                           |||||| || |                          |||                             ||                              |                  double remove-----------------------------------------+||                                       |                  |              |                      |
|                                              |||||| || |                          |||                             ||                              |                        |                                               |||                                       |                  |              |                      |
|                                              |||||| || |                          |||+---------------------------+||                              |                        |                                               |||                                       |                  |              |                      |
|                                              |||||| || |                          ||||                           |||                              |                        |                                               |||                                       |                  |              |                      |
|                                              ||||||||| |                          ||||                           |||           +-------------+    |                        |                                               |||                                       |                  |              |                      |
|                                              ||||||||| |                          ||||                           |||           |             |    |                        |                                               |||                                       |                  |              |                      |
|                                              ||||||||| |                          ||||                           |||           |             |----+                        |                                               |||                                       |                  |              |                      |
|                                              ||||||||| |                          ||||                           |||           |RestoreJokes |                             |                                               |||                                       |                  |              |                      |
|                                              ||||||||| |                          ||||                           ||+---------->|             |<----+                       |                                               |||                                       |                  |             add                     |
|                                              |||require|                          ||||                           ||            |             |     |                       |                                               |||                                       |                  |              |                      |
|                                              ||||||||| |                          ||||                           ||            |             |     |                       |                                               |||                                       |                  |              |                      |
|                                              ||||||||| |                          ||||                           ||            |             |----+|                       |                                               |||                                       |                  |              |                      |
|                                              ||||||||| |                          ||||                         remove          +-------------+    ||                       |                                               |||                                       |               require           |                      |
|                                              ||||||||| |                          ||||                           ||                               ||                       |                                               |||                                       |                  |              |                      |
|                                              ||||||||| |           +------------+ ||||                           ||                               ||                       |                                               |||                                       |                  |              |                      |
|  +------------------+                        ||||||||| |           |            | ||||                           ||                               ||                       |                                               |||                                       |                  |              |                      |
|  |ErrHandlerTimeout |                        ||||||||| |           |            | ||||                           ||                               ||                       |                                               |||                                       |                  |              |                      |
|  |                  |------------------------||-|+|||| |           |            | ||||                           ||                               ||                       |                                               |||                                       |                  |              |                      |
|  +------------------+                        |||| |||| |           |            |-+|||+-------------------------+||                               ||                       |                                               |||                                       |                  |              |                      |
|                                              |||| |||| |           |            |  ||||                         |||                               |+-----------------------+                                               |||                                       |                  |              |                      |
|                                              |||| |||| |           |            |--+|||                         |||                               |                                                                        |||                                       |                  |              |                      |
|                                              |||| |||| |           |            |   |||                         |||                               |                                                                        |||                                       |                  |              |                      |
|                                              |||| |||| |           |            |---+||                         |||                               |                                                                        |||                                    require               |              |                      |
|                                              |||| |||| |           |            |    ||                         |||                               |                                                                        |||                                       |                  |              |                      |
|                                              |||| |||| | |         |            |----+|                         |||                               |                                                                        |||                                       |                  |              |                      |
|                                              |||| |||| | |         |            |     |                         |||                               |                                                                        |||                                       |                  |              |                      |
|                                              |||| |||  | |         |            |<----+                         |||                               |                                                                        |||                                       |                  |              |                      |
|                                              |||| |||  | |         |Interrupted |                               |||                               |                                                                        |||                                       |                  |              |                      |
|                                              |||| ||require        |            |------------------------------+|||                               |                                                                        |||                                       |                  |              |                      |
|                                              |||| |||  | |         |            |                             remove                              |                                                                        |||                                       |                  |              |                      |
|                                              |||| |||  | |         |            |                              ||||                               |                                                                        |||                                       |                  |              |                      |
|                                              |||| |||  | |         |            |-----------------------------+||||                               |                                                                        |||                                       |                  |              |                      |
|                                              |||| |||  | |         |            |                             |||||                               |                                                                        |||                                       |                  |              |                      |
|                                              |||| |||  | |         |            |----------------------------+|||||                               |                                                                        |||                                       |                  |              |                      |
|         +-----------+                        |||| |||  | |         |            |                            |||||| |                             |                                                                        |||                                       |                  |              |                      |
|         |ErrNetwork |                        |||| |||  | |         |            |                            |||||| |  +--------------+           +-----------------------------------------------------------------------+|||                                       |                  |              |                      |
|         |           |------------------------||-|--|+  | |         |            |---------------------------+|||||| |  |StoryWakingUp |                                                                                   ||||                                       |                  |              |                      |
|         +-----------+                        |||| ||   | |         |            |                           ||||||+-|->|              |                                                                                   ||||                                       |                  |              |                      |
|                                              |||| ||   | |         |            |--------------------------+||||||  |  +--------------+                                                                                   ||||                                       |                  |              |                      |
|                                              |||| ||   | |         |            |                          |||||||  |                                                                                                     ||||                                       |                  |              |                      |
|                                              |||| ||   | |         |            |-+                        |||||||  |                                                                                                     ||||                                       |                  |              |                      |
|                                              |||| ||   | |         |            | |                        |||||||  |                                                                                                     ||||                                       |                  |              |                      |
|                                              |||| ||   | |         +------------+ |                        |||||||  |                                                                                                     ||||                                       |                  |              |                      |
|                                              |||| ||   | |                        |                        |||||||  |                                                                                                     ||||                                       |                  |              |                      |
|                                              |||| ||  || |                        |                        |||||||  |                                                                                                     ||||                                       |                  |              |                      |
|                                              |||| ||  || |                        |                       double remove                                                                                                   ||||                                       |                  |              |                      |
|                                              |||| ||  || |                        |                        |||||||  |                                                                                                     ||||                                       |                  |              |                      |
|                                              |||| ||  require                     |                        |||||||  |                                                                                                     require                                    |                  |              |                      |
|                                              |||| ||  || |                        |                        |||||||  |                                                                                                     ||||                                       |                  |              |                      |
|     +---------------+                        |||| ||  || |                        |                        |||||||  |                                                                                                     ||||                                       |                  |              |                      |
|     |UISrvListening |                        |||| ||  || |                        |                        |||||||  |  +----------+                                                                                       ||||                                       |                  |              |                      |
|     |               |------------------------+||| ||  || |                        |                        |||||||  |  |StoryJoke |                                                                                       ||||                                       |                  |              |                      |
|     +---------------+                         ||| ||  || |                        |                        ||||||+--|->|          |                                                                                       ||||                                       |                  |              |                      |
|                                               ||| ||  || |                        |                        ||||||   |  +----------+                                                                                       ||||                                       |                  |              |                      |
|                                               ||| ||  || |                        |                        ||||||   |                                                                                                     ||||                                       |                  |              |                      |
|                                               ||| ||  || |                        |                        ||||||   |                                                                                                   require                                      |                  |              |                      |
|                                               ||| ||  || |                        |                        |||add   |                                                                                                     ||||                                       |                  |              |                      |
|                                               ||| ||  || |                        |                        ||||||   |                                                                                                     ||||                                       |                  |              |                      |
|                                               ||| ||  || | |                      |                        ||||||   |                                                                                                     ||||                                       |                  |              |                      |
|                                               |require|| | |                      |                        ||||||   |                                                                                                     ||||                                       |                  |              |                      |
|                                               ||| ||  || | |                      |                        ||||||   |                                                                                                     ||||                                       |                  |              |                      |
|                                               ||| ||  ||require                   |                        ||||||   |                                                                                                     ||||                                       |                  |              |                      |
|                                               ||| ||  || | |                      |                        ||||||   |                                                                                                     ||||                                       |                  |              |                      |
|                                               ||| ||  || | |                      |                        ||||||   |                                                                                                    require                                     |                  |              |                      |
|                                               ||| ||  || | |                      |                        ||||||   |                                                                                                     ||||                                       |                  |              |                      |
|     +---------------+                         ||| ||  || | |                      |                        remove   |                                                                                                     ||||                                       |                  |              |                      |
|     |RequestingTool |                         ||| ||  || | |                      |                        ||||||   |  +-------+                                                                                          ||||                                       |                  |              |                      |
|     |               |---------------------+   ||| ||  || | |                      |                        ||||||   |  |Resume |                                                                                          ||||                                       |                  |              |                      |
|     +---------------+                     |   ||| ||  || | |                      |                        |||||+---|->|       |                                                                                          ||||                                       |                  |              |                      |
|                                           |   ||| ||  || | |                      |                        |||||    |  +-------+                                                                                          ||||                                       |                  |              |                      |
|                                           |   ||| ||  || | |                      |                        |||||    |                                                                                                     ||||                                       |                  |              | +-----------------+  |
|                                           |   ||| ||  || | |                      |                        |||||    |                                                                                                     ||||                                       |                  |              | |                 |  |
|                                           |   ||| ||  || | |                      |                        |||||    |                                                                                                     ||||                                       |                  |            +-->|RegisterDisposal |  |
|                                           |   ||| ||  || | |                      |                        |||||    |                                                                                                     ||||                                       |                  |              | |                 |  |
|                                           |   ||| ||  || | |                      |                        |||||    |                                                                                                     ||||                                       |                  |             +->|                 |  |
|                                           |   ||| ||  || | |                      |                        |||||    |                                                                                                     ||||                                       |                  |              | +-----------------+  |
|                                          double remove|||| |                      |                        |||||    |                                                                                                     ||||                                       |                  |              |                      |
|                                           |   ||| ||  |||| |                      |                        |||||    |                                                                                                     ||||                                       |                  |              |                      |
|                                           |   ||| ||  |||| |                      |                       remove    |                                                                                                     ||||                                       |                  |              |                      |
|                                           |   ||| ||  |||| |                      |                        |||||    |                                                                                                     ||||                                       ||                 |              |                      |
|                                           |   ||| ||  |||| |                      |                        |||||    |                                                                                                     ||||                                       ||                 |                                     |
|                                           |   ||| ||  |||| |                      |                        |||||    |                                                                                                     ||||                                     require              |                                     |
|                                           |   ||| ||  |||| |                      |                        |||||    |                                                                                                     ||||                                       ||                 |                                     |
|   +---------------+                       |   ||| ||  |||| |                      |                        |||||    |                                                                                                     ||||                                       ||                 |                                     |
|   |ErrIngredients |                       |   ||| ||  |||| |                      |                        |||||    |                                                          +-------------+                            ||||                                       ||                 |                                     |
|   |               |                       |   ||| ||  |||| |                      |                        ||||+-require------------------------------------------------------>|             |                            ||||                                       ||                 |                                     |
|   +---------------+                       |   ||| ||  |||| |                      |                      remove     |                                                          |InputPending |<---------------------+     ||||                                       ||                 |                                     |
|                                           |   ||| ||  |||| |                      |                        ||||     |                                                     +--->|             |                      |  require                                       ||                 |                                     |
|                                           |   ||| ||  |||| |                      |                        ||||     |                                                     |    |             |                      |     ||||                                       ||                 |                                     |
|                                           |   ||| ||  |||| |                      |                        ||||     |                                                     |    +-------------+                      |     ||||                                       ||                 |                                     |
|                                           |   ||| ||  |||| |                      |                        ||||     |                                                     |                                         |     ||||                                       ||                 |                                     |
|                                           |   ||| ||  |||| |                      |                        ||||     |                                                     |                                         |     ||||                                       ||                 |                +-----------+        |
|                                           |   ||| ||  |||| |                      |                        ||||     |                                                     |                                         |     ||||                                       ||                 |              +>|           |        |
|                                           |   ||| ||  |||| |                      |                        ||||     |                                                     |                                         |     ||||                                       ||                 |                |DBStarting |        |
|                                           |   ||| ||  |||| |                      +-----------------------+||||     |                                                     |                                         |     ||||                                       ||                 +----------------|           |        |
|                                           |   ||| ||  |||| |                                              |||||     |                                                     |                                         |     ||||                                       ||                                +>|           |        |
|                                           |   ||| ||  |||| |                                              |||||     |                                                     |                                         |     ||||                                       ||                                | +-----------+        |
|                                           |   ||| ||  |||| |                                              |||||     |                                                     |                                         |     ||||                                       ||                                |                      |
|                                           |   ||| ||  |||| |                                            remove|     |                                                     |                                         |     ||||                                       ||                                |                      |
|                                           |   ||| ||  |||| |                                              |||||     |                                                     |                                         |     ||||                                       ||                                |                      |
|                                           |   ||| ||  |||| |                                              |||||     |                                                     |                                         |     ||||                                       ||                              | |                      |
|                                           |   ||| ||  |||| |                                              |||||     |                                                     |                                         |     ||||                                       |||                             | |                      |
|            +--------+                     |   ||| ||  |||| |                                              |||||     |                                                     |                                         |     ||||                                       |||                             | |                      |
|            |UIReady |                     |   ||| ||  |||| |                                              |||||     |  +------------------------+                         |                                         |     ||||                                       |||                             | |                      |
|            |        |-------------------------+|| ||  |||| |                                              |||||     |  |StoryIngredientsPicking |                         |                                         |     ||||                                       |||                             | |                      |
|            +--------+                     |    || ||  |||| |                                              ||||+-----|->|                        |                         |                                         |     ||||                                       |||                             | |                      |
|                                           |    ||  |  |||| |                                              ||||      |  +------------------------+                         |                                         |     ||||                                       |||                             | |                      |
|                                           |    ||  |  |||| |                                              ||||      |                                                     |                                         |     ||||                                       |||                             | |                      |
|                                           |    ||  |  |||| |   +---------------+  +----------------------+||||      |                                                     |                                         |     ||||   +--------+                          |||                             | |                      |
|                                           |    ||  |  |||| |   |               |  |                      |||||      |                                                     |                                         |     ||||   |        |                          |||                             |||                      |
|                                           |    ||  |  |||| |   |ResourcesReady |<-+                      |||||      |                                                     |                                         |     |||+-->|        |                          |||                             |||                      |
|                                           |    ||  | +||||-|-->|               |                         |||||      |                                                     |                                         |     |||    |        |                          |||                             |||                      |
|                                           |    ||  |  |||| |   |               |<-+                      |||||      |                                                     |                                         |     |||    |        |                          |||                             |||                      |
|                                           |    ||  |  |||| |   +---------------+  |                      |||||      |                                                     |                                         |     |+|--->|        |                          |||                             |||                      |
|                                           |    ||  |  |||| |                      |                      |||||      |                                                     |                                         |     | |    |        |--------------------------+||                             |||                      |
|                                           |    ||  |  |||| |                      |                      |||||      |                                                     |                                         |+------|--->|        |                           ||                             |||                      |
|                                           |    ||  |  |||| |                      |                      |||||      |                                                  remove                                       ||    | |    |DBReady |                           ||                             |||                      |
|                                           |    ||  |  |||| |                      |                      |||||      |                                                     |                                         ||    | |    |        |                           ||                             |||                      |
|                                           |    ||  |  |||| |                      |                      |||||      |                                                     |                                         ||+---|-|--->|        |                           ||                             |||                      |
|                                           |    ||  |  |||| |                      |                      |||||      |                                                     |                                         |||   | |    |        |                           ||                             |||                      |
|                                           |    ||  |  |||| |                      |                      |||||      |                                                     |                                         |||+-------->|        |<-----------------------double remove----------------------|+                      |
|                                           |    ||  |  |||| |                      |                      |||||      |                                                     |                                         ||||  | |    |        |                           ||                             ||                       |
|                                           |     |  |  |||| |                      |                      |||||      |                                                     |                                         |||| +|-|--->|        |                           ||                             ||                       |
|      +--------------+                     |     |  |  |||| |                      |                      |||||      |                                                     |                                         |||| || |    |        |                           ||                             ||                       |
|      |UISessDisconn |                     |     |  |  |||| |                      |                      |||||      |  +-------------------+                              |                                         |||| || |    +--------+                           ||                             ||                       |
|      |              |---------------------------+  |  |||| |                      |                      |||||      |  |StoryRecipePicking |                              |                                         |||| || |                                         ||                             ||                       |
|      +--------------+                     |        |  |||| |                      |                      ||||+------|->|                   |                              |                                         |||| || |                                         ||                             ||                       |
|                                           |        |  |||| |                      |                      ||||       |  +-------------------+                              |                                         |||| || |                                         ||                             ||                       |
|                                           |        |  |||| |                      |                      ||||       |                                                     |                                         |||| || |                                         ||                             ||                       |
|                                           |        |  |||| |                      |                    remove       |                                                     |                                         |||| || |                                         ||                             ||                       |
|                                           |        |  |||| |                      |                      ||||       |                                                     |                                         |||| || |                                         ||                             ||                       |
|                                           |        |  |||| |                      |                      ||||       |                                                     |                                         |||| || |   +---------------+                     ||                             ||                       |
|                                           |        |  |||| |                      |                      ||||       |                                                     |                                         |||| || |   |               |                     ||                             ||                       |
|     +---------------+                     |        |  |||| |                      |                      ||||       |                                                     |                                         |||| || |   |               |                     ||                             ||                       |
|     |ErrSendPayload |                     |        |  |||| |                      |                      ||||       |      +---------------+                              |                                         |||| || | +>|               |                     ||                             ||                       |
|     |               |------------------------------|--|+|| |                      |                      ||||       |      |StoryMealReady |                              |                                         |||| || |   |               |                     ||                             ||                       |
|     +---------------+                     |        |  | || |                      |                      |||+-------|----->|               |------------------------------+                                         |||| || |   |               |                     ||                             ||                       |
|                                           |        |  | || |                      |                      |||        |      +---------------+                                                                      require|| +-->|               |                     ||                             ||                       |
|                                           |        |  | || |                      |                      |||        |                                                                                               |||| ||     |               |                     ||                             ||                       |
|                                           |        |  | || |                      |                      |||        |                                                                                               |||| |+---->|               |                     ||                             ||                       |
|                                           |        |  | || |                      |                      |||        |                                                                                               |||| |      |               |                     ||                             ||                       |
|                                           |        |  | || |                      |                      |||        |                                                                                               |||| |      |CharacterReady |                     ||                             ||                       |
|                                           |        |  | || |                      |                      |||        |                                                                                               ||||+------>|               |                     ||                             ||                       |
|                                           |        |  | || |                      |                      |||        |                                                                                               ||||||      |               |                     ||                             ||                       |
|                                           |        |  | || |                      |                      |||        |                                                                                               ||||||+---->|               |                     ||                             ||                       |
|                                           |        |  | || |                      +---------------------+|||        |                                                                                               |||||||     |               |                     ||                             ||                       |
|                                           |        |  | || |                                            ||||        |                                                                                               |||||||+--->|               |                     ||                             ||                       |
|                                           |        |  | || |                                            ||||        |                                                                                               ||||||||    |               |                     ||                             ||                       |
|                                           |        |  | || |                                            ||||        |                                                                                               ||||||||+-->|               |                     ||                             ||                       |
|                                           |        |  | || |                                       double remove    |                                                                                               |||||||||   |               |                     ||                             ||                       |
|                                           |        |  | || |                                            ||||        |                                                                                               |||||||||   +---------------+                     ||                             ||                       |
|                                           |        |  | || |                                            ||||        |                                                                                               |||||||||                                         ||                             ||                       |
|       +-------------+                     |        |  | || |                                            ||||        |                                                                                               |||||||||                                         ||                             ||                       |
|       |UISaveOutput |                     |        |  | || |                                            ||||        |  +----------------+                                                                           |||||||||                                         ||                             ||                       |
|       |             |------------------------------+  | || |                                            ||||        |  |StoryMemoryWipe |                                                                           |||||||||                                         ||                             ||                       |
|       +-------------+                     |           | || |                                            |||+--------|->|                |                                                                           |||||||||                                         ||                             ||                       |
|                                           |           | || |                                            |||         |  +----------------+                                                                     double remove||                                         ||                             ||                       |
|                                           |           | || |                                            |||         |                                                                                               |||||||||                                         ||                             ||                       |
|                                           |           | || |                                            |||         |                                                                                               |||||||||                                         ||                          remove                      |
|                                           |           | || |                                            |||         |                                                                                               |||||||||                                         ||                             ||                       |
|                                           |           | || |    +------------+                          |||         |                                                                                               |||||||||                                         ||                             ||                       |
|                                           |           | || |    |RecipeReady |                          |||         |                                                                                               |||||||||                                         ||                             ||                       |
|                                           |       +---|-||-|--->|            |-------------------------+|||         |                                                                                               |||||||||                                         ||                             ||                       |
|                                           |           | || |    +------------+                         ||||         |                                                                                               |||||||||                                         ||                           remove                     |
|                                           |           | || |                                           ||||         |                                                                                               |||||||||                                         ||                             ||                       |
|                                           |           | || |                                           ||||         |                             +------------------------------------------------------------------+|||||||                                         ||                             ||                       |
|                                           |           | || |                                           ||||         |                             |                                                                 | |||||||                                         ||                             ||                       |
|             +-------+                     |           | || |                                           ||||         |                             |                                                                require|||                                         ||                             ||                       |
|             |ErrLLM |                     |           | || |                                           ||||         |  +----------------+         |                                                                 | |||||||                                         ||                             ||                       |
|             |       |---------------------------------|-|+ |                                           ||||         |  |StoryStartAgain |         |                                                                 | |||||||                                         ||                             ||                       |
|             +-------+                     |           | |  |                                           |||+---------|->|                |         |                                                                 | |||||||                                         ||                             ||                       |
|                                           |           | |  |                                           |||          |  +----------------+         |                                                                 | |||||||                                         ||                             ||                       |
|                                           |           | |  |                                           |||          |                             |                                                                 |require|                                         ||                             ||                       |
|                                           |           | |  |                                           |||          |                             |                                                                 require||                                         ||                             ||                       |
|                                           |           | |  |                                           |||          |                             |                                                                 | |||||||                                         ||                             ||                       |
|                                           |           | |  |     +---------+                           |||          |                             |                                                                 | |||||||                                         ||                             ||                       |
|                                           |           | |  |     |GenSteps |                           |||          |                             |                                                                 | |||||||                                         ||                             ||                       |
|                                           |    +------|-|--|---->|         |----------------------------------------+                             |                                                                 | |||||||                                         ||                             ||                       |
|                                           |           | |  |     +---------+                           |||                                        |                                                                 | |||||||                                         ||                             ||                       |
|                                           |           | |  |                                           |||                                        |                                                                 | |||||||                                         ||                             ||                       |
|                                           |           | |  |                                           |||                                        |                                                                 | require                                         ||                             ||                       |
|                                           |           | |  |                                           |||                                        |                                                                 | |||||||                                         ||                             ||                       |
|       +-------------+                     |           | |  |                                           |||                                        |                                                                 | |||||||                                         ||                             ||                       |
|       |UIButtonSend |                     |           | |  |                                           |||                  +-----------------+   |                                                                 | |||||||                                         ||                             ||                       |
|       |             |---------------------------------+ |  |                                           |||                  |                 |   |                                                                 | |||||||                                         ||                             ||                       |
|       +-------------+                     |             |  |                                           |||                  |                 |   |                                                                 | |||||||                                         ||                             ||                       |
|                                           |             |  |                                           |||                  |                 |---+                                                                 | |||||||                                         ||                             ||                       |
|                                           |             |  |                                           |||                  |RestoreResources |                                                                     | |||||||                                         ||                             ||                       |
|                                           |             |  |                                           ||+----------------->|                 |----+                                                                | |||||||                                         ||                             ||                       |
|                                           |             |  |                                           ||                   |                 |    |                                                                | |||||||                                         ||                             ||                       |
|                                           |             |  |                                           ||                   |                 |<--+|                                                                | |||||||                                         ||                             ||                       |
|                                           |             |  |                                           ||                   |                 |   ||                                                                | |require                                        ||                             ||                       |
|                                           |             |  |                                           ||                   +-----------------+   ||                                                                | |||||||                                         ||                             ||                       |
|                                           |             |  |                                           ||                                         ||                                                                | |||||||                                         ||                             ||                       |
|                                           |             |  |                                      double remove                                   ||                                                                | |||||||                                         ||                             ||                       |
|                                           |             |  |                                           ||                                         ||                                                                | |||||||                                         ||                             ||                       |
|       +-------------+                     |             |  |                                           ||                                         ||                                                                |double remove                                    ||                             ||                       |
|       |ErrProviding |                     |             |  |                                           ||                                         ||                                                                | |||||||                                         ||                             ||                       |
|       |             |-----------------------------------|--+                                           ||                                         |+-------------------------------------------------------------------|+||||                                         ||                             ||                       |
|       +-------------+                     |             |                                              ||                                         |                                                                 | || ||||                                         ||                             ||                       |
|                                           |             |                                              ||                                   double remove                                                           | || ||||                                         ||                             ||                       |
|                                           |             |                                              ||                                         |                                                                 | || ||||                                         ||                             ||                       |
|                                          add            |                                              ||                                         |                                                                 | || ||||                                         ||                             ||                       |
|                                           |             |                                              ||                                         |                                                                 | || ||||                                         ||                             ||                       |
|                                           |             |                                              ||                                         |                                                                 | double remove                                   ||                             ||                       |
|                                           |             |                                              ||                                         |                                                                 | || ||||                                         ||                             ||                       |
|                                                         |                                              ||                                         |                                                                 | || ||||                                         ||                             ||                       |
|                                                         |                                           require                                       |                                                                 | || ||||                                         ||                             ||                       |
|                                                         |                                              ||                                         |                                                                 | || ||||                                         ||                             ||                       |
|         +-----------+                                   |                                              ||                                         +------------------------+                                        | || ||||                                         ||                             ||                       |
|         |UISessConn |                                   |                                              ||                                                                  |                                        | || ||||                                         ||                             ||                       |
|         |           |-----------------------------------+                                              ||                                                                  |                                        | || ||||                                         ||                             ||                       |
|         +-----------+                                                                                  ||                                                                  |                                        | || ||||     +-------+                           ||                             ||                       |
|                                                                                                        ||                                                                  |                                        +--|--|------>|       |                           ||                             ||                       |
|                                                                                                        ||                                                                  |                                          || ||||     |Prompt |---------------------------+|                             ||                       |
|                                                                                                        ||                                                                  |                                          || ||||+--->|       |                            |                             ||                       |
|                                                                                                        ||                                         +------------------------|------------------------------------------+| |||||    |       |                            |                             ||                       |
|                                                                                                        ||                                         |                        |                                           | |||||    +-------+                            |                             ||                       |
|                                                                                                        ||                                         |                        |                                           | |||||                                         |                             ||                       |
|                                                                                                        ||                         +-------------+ |                        |                                           | |||||                                         |                             ||                       |
|                                                                                                        ||                         |             | |                        |    +-------------+                        | |||||                                         |                             ||                       |
|                                                                                                        ||                         |             |-+                        |    |             |                        | |||||                                         |                             ||                       |
|                                                                                                        ||                         |             |                          +--->|GenResources |------------------------+ |||||                                         |                             ||                       |
|                                                                                                        ||                         |GenCharacter |                               |             |                          |||||                                         |                             ||                       |
|                                                                                                        ||                         |             |<+                        +--->|             |---+                      |||||                                         |                             ||                       |
|                                                                                                        ||                         |             | +------double remove------+   +-------------+   |                      |||||                                         |                             ||                       |
|                                                                                                        ||                         |             |<+                        ||                     |                      |||||                                         |                             ||                       |
|                                                                                                        ||                         |             | |                        ||                     |                      |||||                                         |                             ||                       |
|    +--------------+                                                                                    ||                         +-------------+ |                        ||                     |                      |||||                                         |                             ||                       |
|    |OrientingMove |                                                                                    ||                                         |                        ||                     |                      |||||                                         |                             ||                       |
|    |              |                                                                                    ||                                         |                        ||                     |                      |||||                                         |                             ||                       |
|    +--------------+                                                                                    ||                                         |                        ||                     |                      |||||                                         |                             ||                       |
|                                                                                                        ||                                         |                        ||                     |                      |||||                                         |                             ||                       |
|                                                                                                        ||                                         |                        ||                     |                      |||||        +---------+                      |                             ||                       |
|                                                                                                        ||                                         |                        ||                     |                      |||||        |         |                      |                             ||                       |
|                                                                                                        ||                                         |                        ||                     +-----------------------+|||        |         |                      |                             ||                       |
|                                                                                                        ||                                         |                        ||                                            | |||        |         |----------------------|-----------------------------+|                       |
|                                                                                                        ||                                         |                        ||                                            | |||        |Disposed |                      |                              |                       |
|                                                                                                        ||                                         |                        ||                                            | |||        |         |----------------------+                              |                       |
|                                                                                                        ||                                         |                        ||                                            | |||        |         |                                                     |                       |
|                                                                                                        ||                                         |                        ||                                            | |||        |         |<+                                                   |                       |
|                                                                                                        ||                                         |                        ||                                            | |||        |         | |                                                   |                       |
|                                                                                                        ||                                         |                        ||                                            | |||        +---------+ |                                                   |                       |
|                                                                                                        ||                                         |                        ||                                            | |||                    |                                                   |                       |
|                                                                                                        ||                                         |                        || +-----------------+                        | |||                    |                                                   |                       |
|                                                                                                        ||                                         |                        || |                 |                        | |||                    |                                                   |                       |
|                                                                                                        ||                                         |                        || |RestoreCharacter |------------------------+ |||                    |                       +----------+                |                       |
|                                                                                                        ||                                         |                        |+>|                 |                          |||                    |                       |Disposing |                |                       |
|                                                                                                        ||                                         |                        |  |                 |<+                        |||                    +-----double remove---->|          |----------------+                       |
|                                                                                                        ||                                         |                        |  +-----------------+ |                        |||                                            +----------+                                        |
|                                                                                                        ||                                         |                        |                      |                        |||                                                                                                |
|                                                                                                        ||                                         |                        |                      |                       remove                                                                                              |
|                                                                                                        |+-----------------------------------------|------------------------+                      |                        |||                                                                                                |
|                                                                                                        |                                          |                                               |                        |||                                                                                                |
|                                                                                                        |                                          |                                               +------------------------+||                                                                                                |
|                                                                                                        |                                          |                                                                         ||                                                                                                |
|                                                                                                        |                                          +-------------------------------------------------------------------------+|                                                                                                |
|                                                                                                        |                                                                                                                     |                                                                                                |
|                                                                                                        |               +-----------------+                                                                                   |                                                                                                |
|                                                                                                        |               |IngredientsReady |                                                                                   |                                                                                                |
|                                                                                                        +-------------->|                 |                                                                                   |                                                                                                |
|                                                                                                                        +-----------------+                                                                                   |                                                                                                |
|                                                                                                                                                                                                                              |                                                                                                |
|                                                                                                                                                                                   +-------------+                            |                                                                                                |
|                                                                                                                                                                                   |InputBlocked |                            |                                                                                                |
|                                                                                                                                                                                   |             |----------------------------+                                                                                                |
|                                                                                                                                                                                   +-------------+                                                                                                                             |
|                                                                                                                                                                                                                                                                                                                               |
|                                                           |                                                                                                                                                                                                                                                                   |
|                                                           |  +-----------+                                                                                                                                                                                                                                                    |
|                                           +---------------|->|           |                                                                                                                                                                                                                                                    |
|                                                           |  |Requesting |                                                                                                                                                                                                                                                    |
|                                                           |+>|           |                                                                                                                                                                                                                                                    |
|                                                           || |           |                                                                                                                                                                                                                                                    |
|                                                           || +-----------+                                                                                                                                                                                                                                                    |
|                                                           ||                                                                                                                                                                                                                                                                  |
|                                                           add                                                                                                                                                                                                                                                                 |
|                                                           ||                                                                                                                                                                                                                                                                  |
|      +--------------+                                     ||                                                                                                                                                                                                                                                                  |
|      |RequestingLLM |                                     ||                                                                                                                                                                                                                                                                  |
|      |              |-------------------------------------|+                                                                                                                                                                                                                                                                  |
|      +--------------+                                     |                                                                                                                                                                                                                                                                   |
|                                                           |                                                                                                                                                                                                                                                                   |
|     +------------+                                        |                                                                                                                                                                                                                                                                   |
|     |SendPayload |                                        |                                                                                                                                                                                                                                                                   |
|     |            |                                        |                                                                                                                                                                                                                                                                   |
|     +------------+                                        |                                                                                                                                                                                                                                                                   |
|                                                           |                                                                                                                                                                                                                                                                   |
|     +-----------+                                         |                                                                                                                                                                                                                                                                   |
|     |ErrCooking |                                         |                                                                                                                                                                                                                                                                   |
|     |           |                                         |                                                                                                                                                                                                                                                                   |
|     +-----------+                                         |                                                                                                                                                                                                                                                                   |
|                                                           |                                                                                                                                                                                                                                                                   |
|       +-------------+                                     |                                                                                                                                                                                                                                                                   |
|       |UIButtonIntt |                                     |                                                                                                                                                                                                                                                                   |
|       |             |-------------------------------------+                                                                                                                                                                                                                                                                   |
|       +-------------+                                                                                                                                                                                                                                                                                                         |
|                                                                                                                                                                                                                                                                                                                               |
|    +--------------+                                                                                                                                                                                                                                                                                                           |
|    |StepCompleted |                                                                                                                                                                                                                                                                                                           |
|    |              |                                                                                                                                                                                                                                                                                                           |
|    +--------------+                                                                                                                                                                                                                                                                                                           |
|                                                                                                                                                                                                                                                                                                                               |
|      +----------+                                                                                                                                                                                                                                                                                                             |
|      |Orienting |                                                                                                                                                                                                                                                                                                             |
|      |          |                                                                                                                                                                                                                                                                                                             |
|      +----------+                                                                                                                                                                                                                                                                                                             |
|                                                                                                                                                                                                                                                                                                                               |
|        +-----+                                                                                                                                                                                                                                                                                                                |
|        |Mock |                                                                                                                                                                                                                                                                                                                |
|        |     |                                                                                                                                                                                                                                                                                                                |
|        +-----+                                                                                                                                                                                                                                                                                                                |
|                                                                                                                                                                                                                                                                                                                               |
|                       +--------add--------+                                                                                                                                                                                                                                                                                   |
|                       |                   |                                                                                                                                                                                                                                                                                   |
|                 +---+ |                   |                  +------------------+                                                                                                                                                                                                                                             |
|                 |as |-+                   +----------------->|tool-searxng-cook |                                                                                                                                                                                                                                             |
|                 |   |<+                   +------------------|                  |                                                                                                                                                                                                                                             |
|                 +---+ |                   |                  +------------------+                                                                                                                                                                                                                                             |
|                       |                   |                                                                                                                                                                                                                                                                                   |
|                       +--------add--------+                                                                                                                                                                                                                                                                                   |
|                                                                                                                                                                                                                                                                                                                               |
|     +------------+                                                                                                                                                                                                                                                                                                            |
|     |memory-cook |                                                                                                                                                                                                                                                                                                            |
|     |            |                                                                                                                                                                                                                                                                                                            |
|     +------------+                                                                                                                                                                                                                                                                                                            |
|                                                                                                                                                                                                                                                                                                                               |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
